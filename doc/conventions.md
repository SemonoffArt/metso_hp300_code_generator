## Соглашение по разработке кода

Этот документ описывает правила написания кода для данного проекта и для code-ассистента. Все решения должны быть согласованы с техническим видением в файле `doc/vision.md`. **Информация из `vision.md` не дублируется, а дополняется практическими правилами.**

### 1. Общие принципы

- **Следуем `vision.md`**  
  - Любые архитектурные и технологические решения должны соответствовать документу `doc/vision.md`.  
  - При сомнениях сначала уточнять/обновлять `vision.md`, затем код.

- **KISS и MVP**  
  - Реализуем только то, что необходимо для текущей цели и минимального рабочего решения.  
  - Не вводим паттерны, слои и абстракции, которые не нужны прямо сейчас.

- **Явная простота важнее "красоты"**  
  - Предпочитаем простой, линейный и легко читаемый код.  
  - Избегаем "магии", скрытых побочных эффектов и излишне умных решений.

### 2. Структура и модули

- **Разделение UI и логики расчёта**  
  - Логика вычисления кода доступа реализуется как отдельные функции/модуль, не смешивается с Tkinter-обработчиками.  
  - UI (окно, поля ввода, кнопки) отвечает только за взаимодействие с пользователем.

- **Следуем структуре проекта из `vision.md`**  
  - Точка входа (например, `main.py`) отвечает за запуск приложения и создание окна.  
  - Модули с логикой не должны знать о деталях UI.

### 3. Зависимости и окружение

- **Минимум зависимостей**  
  - Используем стандартную библиотеку Python и Tkinter, описанные в `vision.md`.  
  - Новые внешние зависимости не добавляем без явного решения и обновления `vision.md`.

- **Менеджер пакетов**  
  - Для управления зависимостями и окружением используем `uv` в соответствии с `doc/vision.md`.  
  - Любые инструкции по установке зависимостей должны быть совместимы с `uv`.

### 4. Код-стайл и качество

- **Читаемость и явность**  
  - Понятные имена функций и переменных, отражающие их назначение.  
  - Небольшие функции, каждая решает одну задачу.

- **Простая обработка ошибок**  
  - Валидация пользовательского ввода (например, формат/длина кода) и вывод понятного сообщения в UI.  
  - Без молчаливого игнорирования ошибок; при невозможности расчёта показывать пользователю простое объяснение.

- **Тестируемость логики**  
  - Основной алгоритм расчёта организован как чистые функции: вход → выход без зависимостей от UI.  
  - Это позволяет легко проверять корректность расчётов отдельно от интерфейса.

Эти правила являются базой и могут расширяться, но любые изменения должны оставаться в духе KISS и быть согласованы с `doc/vision.md`.